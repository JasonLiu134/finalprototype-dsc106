<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="global.js"></script>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Project: A Dive into Surgery Statistics</title>
</head>
<body>
    <h1>A Dive into Surgery Statistics: What Determines ICU Stays?</h1>
    <h2>Background</h2>
    <p>Our project aims to visualize how different preoperative conditions (hypertension, diabetes, abnormal ECG, etc.) correlate with surgery outcomes. We want to utilize plots such as bar charts and correlation matrices, and we want our visualizations to be fully interactable with specific filters of the various risk factors, allowing users to dynamically observe changes in the distribution of patient outcomes. For this reason, we were also thinking about utilizing a violin plot as itâ€™s an effective method of showcasing the distribution and density of mortality across different levels of each preoperative condition. Violin plots can also highlight the density levels by having heatmap-esque sections with respect to each filtered risk factor. The ultimate goal that we have in mind is that this approach tackles how impactful preoperative conditions are on surgery outcomes and how these events can be better predicted in the future. Specifically, we intend on trying to understand what risks are present in surgeries that can often result in high mortality rates, and proposing potential solutions that can address these concerns, using data to guide our approach.</p>
    <hr width="100%" size="2" noshade>

    <h2>Visualization 1</h2>
    <img src="visualizations/v1.png" alt="First Visualization" width="957" height="373">
    <p> This bar chart displays the mortality rates across different surgical departments to highlight the differences in patient outcomes. The color choice was used to showcase the darker colors as the ones with higher mortality, while keeping a cooler color choice to provide comfort given the low percentages.  </p>
    <hr width="100%" size="2" noshade>
    
    <h2>Visualization 2</h2>
    <img src="visualizations/v2.png" alt="First Visualization" width="957" height="459">
    <p> This visualization showcases the mortality rate per the type of surgery done for both male and females. We use teal and pink to differentiate the two genders along with using a grouped bar graph to show the comparisons of death percentages. It should be noted that gynecology is a female-only surgery. </p>
    <hr width="100%" size="2" noshade>
    
    <h2>Visualization 3</h2>
    <img src="visualizations/v3.png" alt="First Visualization" width="957" height="491">
    <p> This graph showcases a distribution surgery duration in length in seconds. This visualization is useful to spot common surgery lengths and find any possible outliers in procedures that affect the number of days that the patient has to stay in the ICU. </p>
    <hr width="100%" size="2" noshade>
    
    <h2>Visualization 4</h2>
    <img src="visualizations/v4.png" alt="First Visualization" width="957" height="320">
    <p> The heat map showcases the correlations between preoperative conditions and deaths within hospitals. We can notice some similarities in which some conditions have strong correlation due to being key aspects towards different diseases or injuries. </p>
    <hr width="100%" size="2" noshade>

    <h2>Scatterplot: Preoperative ALT vs. Surgery Duration</h2>
    
    <label for="preops">Select Preoperative Variable:</label>
    <select id="preops">
        <option value="preop_alt">Preoperative ALT</option>
        <option value="preop_alb">Preoperative ALB</option>
        <option value="preop_pt">Preoperative PT</option>
        <option value="surgery_duration">Surgery Duration</option>
    </select>
    
    <svg width="800" height="500"></svg>

    <!-- Place script tag here to ensure DOM is ready -->
    <script src="visualization.js"></script>

    <dl id="commit-tooltip" class="info tooltip">
      <!-- Add: Time, author, lines edited -->
    </dl>

    <h2>Prototype: Final Interactive</h2>

    <div class="sliders">
      <label>Preoperative Glucose (mg/dL): <span id="glucoseVal">100</span></label>
      <input type="range" id="glucose" min="50" max="300" value="100" step="1">

      <label>Preoperative Albumin (g/dL): <span id="albuminVal">4.0</span></label>
      <input type="range" id="albumin" min="2.0" max="5.0" value="4.0" step="0.1">

      <label>Preoperative ALT (IU/L): <span id="altVal">30</span></label>
      <input type="range" id="alt" min="10" max="100" value="30" step="1">
    </div>

    <div class="output">
      <strong>Predicted ICU Stay:</strong> <span id="icuPred">3</span> days
    </div>

    <div class="chart-container">
      <div id="fin"></div>
    </div>
      
</body>
</html>